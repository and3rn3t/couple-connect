# 💕 Couple Connect - GitHub Copilot Instructions

## 📋 Project Overview

Couple Connect is a modern relationship management application built with React, TypeScript, and Vite. It helps couples strengthen their connection through gamified interactions and meaningful activities.

## 🛠️ Tech Stack & Architecture

### Frontend

- **Framework**: React 19 with TypeScript
- **Build Tool**: Vite
- **Styling**: Tailwind CSS + Radix UI components
- **State Management**: React hooks + custom database hooks
- **Icons**: Phosphor Icons and Heroicons

### Database & Backend

- **Production**: Cloudflare D1 (SQLite)
- **Development**: localStorage with identical interface
- **ORM**: Custom TypeScript service layer
- **Migration**: Automatic data migration utilities

### Deployment

- **Platform**: Cloudflare Pages
- **CI/CD**: GitHub Actions
- **Domain**: Custom domain with Cloudflare DNS

## 📁 Project Structure

```
src/
├── components/           # React components
│   ├── ui/              # Reusable UI components (Radix-based)
│   ├── ActionDashboard.tsx
│   ├── GamificationCenter.tsx
│   └── ...              # Feature-specific components
├── hooks/               # Custom React hooks
│   ├── useDatabase.ts   # Database operations hooks
│   ├── useDatabaseOptimized.ts
│   └── useNotificationSystem.ts
├── services/            # Business logic & database layer
│   ├── database.ts      # Core database service
│   ├── databaseConfig.ts # Configuration management
│   ├── types.ts         # TypeScript interfaces
│   └── migration.ts     # Data migration utilities
├── data/                # Static data & templates
├── lib/                 # Utility functions
└── styles/              # Global styles & themes
```

## 🎯 Key Features & Concepts

### 1. Database System

- **Dual Implementation**: Production (D1) + Development (localStorage)
- **Type Safety**: Full TypeScript interfaces for all entities
- **Migration**: Automatic conversion between storage systems
- **Optimization**: Caching, batching, optimistic updates, retry logic

### 2. Gamification System

- **Points & Rewards**: Users earn points for completing actions
- **Levels & Achievements**: Progressive unlock system
- **Daily Challenges**: Time-based engagement features
- **Partner Collaboration**: Shared goals and progress tracking

### 3. Core Entities

- **Users**: Individual profiles with preferences and stats
- **Couples**: Relationship data and shared progress
- **Issues**: Relationship topics/problems to work on
- **Actions**: Specific activities to address issues
- **Rewards**: Achievement system with unlockable content

## 🔧 Development Guidelines

### Code Style

- Use TypeScript strict mode
- Follow React functional component patterns
- Implement proper error boundaries
- Use custom hooks for business logic
- Prefer composition over inheritance

### Database Operations

- Always use the provided database hooks (`useDatabase.ts`)
- Implement optimistic updates for better UX
- Handle loading and error states properly
- Use proper TypeScript types from `services/types.ts`

### Component Development

- Build on top of Radix UI primitives in `components/ui/`
- Follow the established naming conventions
- Implement proper accessibility (ARIA labels, keyboard navigation)
- Use Tailwind CSS for styling with consistent design tokens

### Performance Considerations

- Database operations are cached and optimized
- Use React.memo for expensive components
- Implement proper loading states
- Avoid unnecessary re-renders with proper dependency arrays

## 📚 Important Files to Reference

### Core Configuration

- `package.json` - Dependencies and scripts
- `vite.config.ts` - Build configuration
- `wrangler.toml` - Cloudflare deployment config
- `tsconfig.json` - TypeScript configuration

### Database Layer

- `src/services/database.ts` - Main database service
- `src/services/types.ts` - All TypeScript interfaces
- `src/hooks/useDatabase.ts` - React hooks for database operations
- `database/schema.sql` - Database schema definition

### UI Components

- `src/components/ui/` - Reusable UI components
- `src/components/ActionDashboard.tsx` - Main dashboard
- `src/components/GamificationCenter.tsx` - Rewards system

## 🚀 Development Workflow

### Database Development

1. Use `npm run dev` for development with localStorage
2. Test with real D1 using `npm run db:dev` for local D1 setup
3. Deploy with `npm run deploy` for production

### Adding New Features

1. Define TypeScript interfaces in `src/services/types.ts`
2. Update database schema in `database/schema.sql` if needed
3. Add database operations to `src/services/database.ts`
4. Create React hooks in `src/hooks/`
5. Build UI components using existing patterns

### Testing & Validation

- Run `npm run type-check` for TypeScript validation
- Use `npm run lint` for code quality checks
- Test database operations with both localStorage and D1
- Validate responsive design across different screen sizes

## 🎨 Design System

### Colors & Theming

- Uses Radix Colors for consistent color palette
- Custom CSS variables defined in `src/styles/theme.css`
- Dark/light mode support built-in

### Component Patterns

- Use `cn()` utility for conditional Tailwind classes
- Implement loading states with skeleton components
- Follow established error handling patterns
- Use proper form validation with React Hook Form

## 🔒 Security & Privacy

### Data Handling

- No sensitive data collection
- Client-side data storage (localStorage/D1)
- No user authentication required (couples share device/account)
- Privacy-focused design with local-first approach

### Code Security

- Input validation on all user data
- Proper TypeScript typing prevents runtime errors
- Content Security Policy headers in production
- Regular dependency updates via Dependabot

## 📖 Documentation

All documentation is organized in the `/docs` folder:

- `/docs/development/` - Technical documentation
- `/docs/features/` - Feature specifications
- `/docs/README.md` - Documentation index

When adding new features or making changes:

1. Update relevant TypeScript types
2. Update documentation in `/docs`
3. Add examples and usage patterns
4. Update this Copilot instructions file if architecture changes

## 🧪 Common Development Tasks

### Adding a New Database Entity

1. Add interface to `src/services/types.ts`
2. Update schema in `database/schema.sql`
3. Add CRUD operations to `src/services/database.ts`
4. Create React hooks in `src/hooks/useDatabase.ts`
5. Add UI components for the new entity

### Creating New UI Components

1. Use Radix UI primitives as base
2. Add to `src/components/ui/` for reusable components
3. Follow established naming and export patterns
4. Implement proper TypeScript props interface
5. Add to component exports in `src/components/ui/index.ts`

### Performance Optimization

- Database operations are already optimized with caching
- Use React.memo for expensive list components
- Implement virtualization for large data sets
- Use proper loading states to improve perceived performance

## 🤝 Collaboration Notes

This project is designed for couples to use together, so:

- UI should be intuitive and welcoming
- Features should encourage collaboration
- Progress tracking should be motivating, not stressful
- Privacy and data security are paramount
- The experience should be fun and engaging, not clinical

## 📞 Additional Resources

- Full documentation: `/docs/README.md`
- Component examples: `/src/components/`
- Database schema: `/database/schema.sql`
- Deployment guide: `/docs/development/DEPLOYMENT.md`
