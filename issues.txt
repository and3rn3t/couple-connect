
> couple-connect@1.0.0 precheck:infinite-loops
> echo 🔍 Checking for infinite re-render loop patterns...

🔍 Checking for infinite re-render loop patterns...

> couple-connect@1.0.0 check:infinite-loops
> node scripts/check-infinite-loops.js

🔍 Scanning for infinite re-render loop patterns...
📁 Scanning directory: C:\git\couple-connect\src

📊 Scan Complete: 166 files scanned

============================================================

🚨 CRITICAL ISSUES FOUND: 7
These patterns are likely to cause infinite re-render loops:

1. 📁 src\components\ServiceWorkerDemo.tsx:22-28
   ❌ Potential infinite loop: setVersion modifies state that's in dependency array
   💡 Remove the state from dependencies or use empty array [] for one-time effects

2. 📁 src\components\ServiceWorkerDemo.tsx:22-28
   ❌ Potential infinite loop: setVersion modifies state that's in dependency array
   💡 Remove the state from dependencies or use empty array [] for one-time effects

3. 📁 src\hooks\useDatabase.ts:61-75
   ❌ Potential infinite loop: setUser modifies state that's in dependency array
   💡 Remove the state from dependencies or use empty array [] for one-time effects

4. 📁 src\hooks\useDatabase.ts:61-75
   ❌ Potential infinite loop: setUser modifies state that's in dependency array
   💡 Remove the state from dependencies or use empty array [] for one-time effects

5. 📁 src\hooks\useDatabase.ts:61-75
   ❌ Potential infinite loop: setUser modifies state that's in dependency array
   💡 Remove the state from dependencies or use empty array [] for one-time effects

6. 📁 src\hooks\useDatabaseOptimized.ts:116-124
   ❌ Potential infinite loop: setUser modifies state that's in dependency array
   💡 Remove the state from dependencies or use empty array [] for one-time effects

7. 📁 src\hooks\useDatabaseOptimized.ts:177-185
   ❌ Potential infinite loop: setCouple modifies state that's in dependency array
   💡 Remove the state from dependencies or use empty array [] for one-time effects


⚠️  WARNINGS: 78
These patterns might cause performance issues:

1. 📁 src\App.tsx:142-187
   ⚠️  Conditional state updates without dependency array
   💡 Ensure this effect should run on every render or add proper dependencies

2. 📁 src\App.tsx:330-336
   ⚠️  Function dependency "currentPartner" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

3. 📁 src\App.tsx:330-336
   ⚠️  Function dependency "otherPartner" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

4. 📁 src\App.tsx:339-410
   ⚠️  Conditional state updates without dependency array
   💡 Ensure this effect should run on every render or add proper dependencies

5. 📁 src\components\ActionDialog.tsx:51-67
   ⚠️  Function dependency "action" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

6. 📁 src\components\ActionDialogOptimized.tsx:49-65
   ⚠️  Function dependency "action" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

7. 📁 src\components\CelebrationAnimation.tsx:24-39
   ⚠️  Function dependency "show" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

8. 📁 src\components\GamificationCenter.tsx:366-370
   ⚠️  Function dependency "actions" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

9. 📁 src\components\MindmapView.tsx:59-59
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

10. 📁 src\components\MindmapView.tsx:60-60
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

11. 📁 src\components\MindmapView.tsx:61-61
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

12. 📁 src\components\MindmapView.tsx:62-62
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

13. 📁 src\components\MobileActionDialog.tsx:125-144
   ⚠️  Function dependency "action" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

14. 📁 src\components\MobileChatInterface.tsx:104-109
   ⚠️  Function dependency "messages" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

15. 📁 src\components\MobileChatInterface.tsx:104-109
   ⚠️  Function dependency "id" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

16. 📁 src\components\MobileIssueDialog.tsx:116-133
   ⚠️  Function dependency "issue" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

17. 📁 src\components\NotificationCenter.tsx:117-244
   ⚠️  Conditional state updates without dependency array
   💡 Ensure this effect should run on every render or add proper dependencies

18. 📁 src\components\ServiceWorkerDemo.tsx:22-28
   ⚠️  Function dependency "active" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

19. 📁 src\components\ui\carousel.tsx:103-112
   ⚠️  Function dependency "api" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

20. 📁 src\hooks\use-mobile.ts:23-43
   ⚠️  Conditional state updates without dependency array
   💡 Ensure this effect should run on every render or add proper dependencies

21. 📁 src\hooks\use-mobile.ts:5-5
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

22. 📁 src\hooks\use-mobile.ts:21-21
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

23. 📁 src\hooks\use-mobile.ts:65-65
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

24. 📁 src\hooks\use-mobile.ts:66-66
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

25. 📁 src\hooks\useDatabase.ts:35-50
   ⚠️  Conditional state updates without dependency array
   💡 Ensure this effect should run on every render or add proper dependencies

26. 📁 src\hooks\useDatabase.ts:195-211
   ⚠️  Function dependency "couple" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

27. 📁 src\hooks\useDatabase.ts:7-7
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

28. 📁 src\hooks\useDatabase.ts:58-58
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

29. 📁 src\hooks\useDatabase.ts:59-59
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

30. 📁 src\hooks\useDatabase.ts:82-82
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

31. 📁 src\hooks\useDatabase.ts:83-83
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

32. 📁 src\hooks\useDatabase.ts:106-106
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

33. 📁 src\hooks\useDatabase.ts:107-107
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

34. 📁 src\hooks\useDatabase.ts:178-178
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

35. 📁 src\hooks\useDatabase.ts:179-179
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

36. 📁 src\hooks\useDatabase.ts:17-17
   ⚠️  Function "setStoredValue" used in useEffect deps without useCallback
   💡 Consider wrapping in useCallback to prevent unnecessary re-renders

37. 📁 src\hooks\useDatabaseOptimized.ts:55-71
   ⚠️  Conditional state updates without dependency array
   💡 Ensure this effect should run on every render or add proper dependencies

38. 📁 src\hooks\useDatabaseOptimized.ts:116-124
   ⚠️  Function dependency "userId" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

39. 📁 src\hooks\useDatabaseOptimized.ts:177-185
   ⚠️  Function dependency "userId" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

40. 📁 src\hooks\useDatabaseOptimized.ts:234-238
   ⚠️  Function dependency "couple" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

41. 📁 src\hooks\useDatabaseOptimized.ts:412-416
   ⚠️  Function dependency "couple" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

42. 📁 src\hooks\useDatabaseOptimized.ts:8-8
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

43. 📁 src\hooks\useDatabaseOptimized.ts:79-79
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

44. 📁 src\hooks\useDatabaseOptimized.ts:80-80
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

45. 📁 src\hooks\useDatabaseOptimized.ts:81-81
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

46. 📁 src\hooks\useDatabaseOptimized.ts:139-139
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

47. 📁 src\hooks\useDatabaseOptimized.ts:140-140
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

48. 📁 src\hooks\useDatabaseOptimized.ts:141-141
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

49. 📁 src\hooks\useDatabaseOptimized.ts:200-200
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

50. 📁 src\hooks\useDatabaseOptimized.ts:201-201
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

51. 📁 src\hooks\useDatabaseOptimized.ts:202-202
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

52. 📁 src\hooks\useDatabaseOptimized.ts:371-371
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

53. 📁 src\hooks\useDatabaseOptimized.ts:372-372
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

54. 📁 src\hooks\useDatabaseOptimized.ts:373-373
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

55. 📁 src\hooks\useKV.ts:36-51
   ⚠️  Conditional state updates without dependency array
   💡 Ensure this effect should run on every render or add proper dependencies

56. 📁 src\hooks\useKV.ts:8-8
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

57. 📁 src\hooks\useKV.ts:18-18
   ⚠️  Function "setStoredValue" used in useEffect deps without useCallback
   💡 Consider wrapping in useCallback to prevent unnecessary re-renders

58. 📁 src\hooks\useMobilePerformance.ts:128-156
   ⚠️  Function dependency "isMobile" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

59. 📁 src\hooks\useMobilePerformance.ts:128-156
   ⚠️  Function dependency "detectDevicePerformance" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

60. 📁 src\hooks\useMobilePerformance.ts:128-156
   ⚠️  Function dependency "measurePerformance" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

61. 📁 src\hooks\useMobilePerformance.ts:26-26
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

62. 📁 src\hooks\useMobilePerformance.ts:32-32
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

63. 📁 src\hooks\useMobilePerformance.ts:260-260
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

64. 📁 src\hooks\useMobilePerformance.ts:261-261
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

65. 📁 src\hooks\useMobilePerformance.ts:262-262
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

66. 📁 src\hooks\useMobilePerformanceMonitoring.ts:61-61
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

67. 📁 src\hooks\useMobilePerformanceMonitoring.ts:78-78
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

68. 📁 src\hooks\useNotificationSystem.ts:45-51
   ⚠️  Function dependency "browserNotifications" might cause re-renders
   💡 Consider wrapping in useCallback or removing from dependencies if not needed

69. 📁 src\hooks\usePullToRefresh.ts:7-7
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

70. 📁 src\hooks\usePullToRefresh.ts:8-8
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

71. 📁 src\hooks\useServiceWorker.ts:65-65
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

72. 📁 src\hooks\useServiceWorker.ts:66-66
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

73. 📁 src\hooks\useServiceWorker.ts:67-67
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

74. 📁 src\hooks\useServiceWorker.ts:68-68
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

75. 📁 src\services\cloudflareCache.ts:448-448
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

76. 📁 src\services\cloudflareCache.ts:449-449
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

77. 📁 src\services\cloudflareCache.ts:450-450
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

78. 📁 src\utils\performanceMonitor.ts:212-212
   ⚠️  useState outside component function
   💡 Ensure useState is only called inside React components

============================================================
📊 SUMMARY:
   Files scanned: 166
   Critical issues: 7
   Warnings: 78

❌ DEPLOYMENT BLOCKED: Critical infinite loop patterns detected!
   Fix these issues before deploying to prevent blank screens.
